name: build-snapd
on: push

jobs:
  build-snapd:
    runs-on: ubuntu-latest
    container:
      image: archlinux:base-devel
    steps:
         - name: Create non-root account
           run: |
                useradd builduser
                passwd -d builduser
         - name: Configure Sudo
           run: |
                pacman -Syu --noconfirm sudo
                printf 'builduser ALL=(ALL) ALL\n' | tee -a /etc/sudoers
     
         - name: Download Dependencies 
           run: |
            pacman -Syu --noconfirm git
         - name: Download PKGBUILD
           run: |
               cd /home/builduser
               sudo -u builduser git clone https://aur.archlinux.org/snapd.git
         - name: Build Package
           run: |
                sudo -u builduser && cd /home/builder/snapd && makepkg --syncdeps --noconfirm

           
